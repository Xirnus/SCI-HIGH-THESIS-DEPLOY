{
  "rules": {
    "students": {
      ".indexOn": ["studentId"],
      ".read": true,
      ".write": true,
      "$student": {
        ".validate": "newData.hasChildren(['studentId', 'fullName', 'academicInfo', 'accountStatus', 'gameData'])"
      }
    },
    "professors": {
      ".read": true,
      ".write": true
    },
    "general_users": {
      ".read": true,
      ".write": true
    },
    "leaderboard": {
      ".indexOn": ["score", "timestamp"],
      ".read": true,
      ".write": true
    },
    "gameplay_data": {
      ".indexOn": ["studentId", "timestamp"],
      ".read": true,
      ".write": true
    },
    "story_progress": {
      ".indexOn": ["studentId"],
      ".read": true,
      ".write": true,
      "$studentId": {
        "noah": {
          ".validate": "newData.hasChildren(['chapter', 'scene', 'completed'])"
        },
        "lily": {
          ".validate": "newData.hasChildren(['chapter', 'scene', 'completed'])"
        },
        "damian": {
          ".validate": "newData.hasChildren(['chapter', 'scene', 'completed'])"
        }
      }
    }
  }
}
